{% extends 'principal.html' %}
{% load static %}
{% load bootstrap_icons %}
<link rel="stylesheet" href="{% static 'css/estilos.css' %}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer"/>
{% block cabecera_extra %}
    {% load static %}
    <script type="text/javascript" src="{% static 'javascript/myjavascript.js' %}"></script>
{% endblock %}

{% block cabecera %}
    <div class ="cabecera">
        <h1>PRODUCTOS | Y PROVEEDORES </h1>
    </div>
{% endblock %}

{% block contenido %}

    {% if messages %}
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }} alert-dismissible fade show mb-0 mt-5" role="alert">
                {{ message }}
                <button type"button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        {% endfor %}
    {% endif %}

    <div class="descripcion_body">
        <div class="descripcion_body-texto">
            {% for producto in productos %}
                <br>
                {% include 'producto/producto.html' %}
                {% if producto.prov_sum_prod.all %}
                    {% for suministro in producto.prov_sum_prod.all %}
                        <h2>Proveedor: {{ suministro.proveedor.nombre_prov|truncatewords:1 }}</h2>
                        <h2>Direcci√≥n: {{ suministro.proveedor.direccion_prov|truncatewords:3}}</h2>
                    {% endfor %}
                {% else %}
                    <h2>No hay proveedores para este producto.</h2>
                {% endif %}
                <div class="">
                    <form action = "{% url 'producto_eliminar' producto.id %}" method="post">
                        {% csrf_token %}
                        <button class="btn btn-danger" onclick="return eliminar();" type="submit">
                            <span>Eliminar este producto{% bs_icon 'trash' %}</span>
                        </button>
                    </form>
                </div>
            {% endfor %}
        </div>
    {% block busqueda %}
    {% endblock %}
    </div>
{% endblock %}

